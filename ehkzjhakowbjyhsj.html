<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/xhtml; charset=UTF-8" /><link rel="stylesheet" href="style.css" /><title>adopting executables</title></head><body><nav><p class="wit-nav-core"><span class="wit-nav-item"><a href="egynetwykdwaqemv.html">libeako</a></span><span class="wit-nav-item"><a href="sdduleiokczzemoa.html">information technology</a></span><span class="wit-nav-item"><a href="mhwolwyjddvhovlc.html">software</a></span><span class="wit-nav-item"><a href="zdfgvdvqeqrydzsl.html">operating system</a></span><span class="wit-nav-item"><a href="kfhbsukddagsjjny.html">nix</a></span><span class="wit-nav-item wit-nav-current-page">adopting executables</span></p></nav><hr class="wit-navigation-separator" /><span class="wit-page_main_part"><section><p>nix does not follow the FHS [file hierarchy standard]</p><div class="wit-content"><section><p>hence the executables produced for other linux variants contain library paths that are incorrect on nix</p><div class="wit-content" /></section><section><p>hence we have to replace those paths in the executables or set our environmental variable LD_LIBRARY_PATH</p><div class="wit-content" /></section></div></section><section><p>finding out what the executable needs</p><div class="wit-content"><section><p>glibc is the most important library an executable wants to be able to find</p><div class="wit-content" /></section><section><p>but to make sure to find all the dependencies : use these instructions on the executable</p><div class="wit-content"><section><p>patchelf --print-interpreter patchelf --print-rpath</p><div class="wit-content" /></section></div></section></div></section><section><p>environment variable</p><div class="wit-content"><section><p>export LD_LIBRARY_PATH=/nix/store/2kcrj1ksd2a14bm5sky182fv2xwfhfap-glibc-2.26-131/lib</p><div class="wit-content" /></section></div></section><section><p>script to patch executables</p><div class="wit-content"><section><p>example :</p><div class="wit-content"><section><p>patchelf --set-interpreter /nix/store/2kcrj1ksd2a14bm5sky182fv2xwfhfap-glibc-2.26-131/lib/ld-linux-x86-64.so.2 $1  patchelf --set-rpath &quot;/nix/store/2kcrj1ksd2a14bm5sky182fv2xwfhfap-glibc-2.26-131/lib:/nix/store/8qfd8gx0j3yzamkrbrfz5kc00h4cqd1q-gmp-6.1.2/lib:/nix/store/jbs6zz82d59znrc53xdbmc47qvmjwjzd-libffi-3.2.1/lib&quot; $1</p><div class="wit-content" /></section></div></section><section><p>unfortunately one needs to update these each time those library packages get updated</p><div class="wit-content"><section><p>because the path to any package version is unique in nix</p><div class="wit-content" /></section></div></section></div></section><section><p><a href="https://unix.stackexchange.com/questions/522822/different-methods-to-run-a-non-nixos-executable-on-nixos">methods to run a non-nixos executable on nixos</a></p><div class="wit-content" /></section></span></body></html>