<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/xhtml; charset=UTF-8" /><link rel="stylesheet" href="style.css" /><title>intuitive introduction</title></head><body><nav><p class="wit-nav-core"><span class="wit-nav-item"><a href="abtagofukashimen.html">libeako</a></span><span class="wit-nav-item"><a href="npjvhykimwqkdzrj.html">topics</a></span><span class="wit-nav-item"><a href="sdduleiokczzemoa.html">info</a></span><span class="wit-nav-item"><a href="mhwolwyjddvhovlc.html">software</a></span><span class="wit-nav-item"><a href="rmciseizvhdgclym.html">user interface</a></span><span class="wit-nav-item"><a href="oeyeaezscdudpssh.html">formal languages</a></span><span class="wit-nav-item"><a href="pudclkcfncxvedwk.html">software coding</a></span><span class="wit-nav-item"><a href="flktedmyhawaehus.html">abstractions from mathematics</a></span><span class="wit-nav-item"><a href="xmtpmaqybielrpxs.html">category theory</a></span><span class="wit-nav-item"><a href="ybwmxqdoenunvcsk.html">optics</a></span><span class="wit-nav-item"><a href="ndgkrnbojyputpec.html">introduction</a></span><span class="wit-nav-item wit-nav-current-page">intuitive introduction</span></p></nav><hr class="wit-navigation-separator" /><span class="wit-page_main_part"><section><p>in this intuitive introduction i use one particular category of optics : &quot;lens&quot;; it is a reification of data membership in a product type; it consists of the accessor functions characterizing the membership :  a getter and a setter :</p><div class="wit-content" /></section><section><p>let Lens member product = { get : product -&gt; member, set : member -&gt; product -&gt; product }</p><div class="wit-content" /></section><section><p>&#39;set&#39; works by taking an old product and replacing the value of the member in it to the taken new value</p><div class="wit-content" /></section><section><p>an example</p><div class="wit-content"><section><p>let Circle = { ..., radius : Number }</p><div class="wit-content" /></section><section><p>lens_radius_in_Circle : Lens Number Circle</p><div class="wit-content" /></section><section><p>lens_radius_in_Circle = Lens { get = radius, set = \ r c -&gt; c with { radius = r } }</p><div class="wit-content" /></section></div></section><section><p>then we can use such a lens for example to change the value of the &#39;radius&#39; member of a circle &#39;c&#39; to a new value &#39;r&#39;</p><div class="wit-content"><section><p>set lens_radius_in_Circle r c</p><div class="wit-content" /></section></div></section><section><p>this does not seem to bring any advantage compared to a built-into-syntax solution, like </p><div class="wit-content"><section><p>c with { radius = r }</p><div class="wit-content" /></section><section><p>the way with lens is even more indirect and verbose</p><div class="wit-content" /></section></div></section><section><p>the real advantage of optics [and lens in particular] is their [type-polymorph] composability :</p><div class="wit-content"><section><p>compose : Lens t1 t2 -&gt; Lens t2 t3 -&gt; Lens t1 t3 </p><div class="wit-content" /></section><section><p>compose l12 l23 =</p><div class="wit-content"><section><p>let</p><div class="wit-content"><section><p>new_get = get l12 &gt;&gt;&gt; get l23</p><div class="wit-content" /></section><section><p>new_set m p = set l23 (set l12 m (get23 p)) p</p><div class="wit-content" /></section><section><p>in Lens new_get new_set</p><div class="wit-content" /></section></div></section></div></section></div></section><section><p>now we can have composite lenses to access members arbitrarily deep :</p><div class="wit-content"><section><p>let Cylinder = { cross_section : Circle, ... }</p><div class="wit-content" /></section><section><p>lens_cs_in_Cylinder : Lens Circle Cylinder</p><div class="wit-content" /></section><section><p>lens_cs_in_Cylinder = Lens { get = cross_section, set = \ ci cyl -&gt; cyl with { circle = ci } }</p><div class="wit-content" /></section><section><p>lens_radius_in_Cylinder : Lens Number Cylinder</p><div class="wit-content" /></section><section><p>lens_radius_in_Cylinder = compose lens_radius_in_Circle lens_cs_in_Cylinder</p><div class="wit-content" /></section></div></section><section><p>infix function symbol can increase the comfort in long composition chains :</p><div class="wit-content"><section><p>let x &gt;&gt;&gt; y = compose x y let y &lt;&lt;&lt; x = compose x y</p><div class="wit-content" /></section></div></section><section><p>an advantage of the reification is that we can represent abstract data membership, for example when the part is not technically a data member of the whole, but mathematically is :</p><div class="wit-content"><section><p>get_lens_at_key : Map key value -&gt; key -&gt; Maybe (Lens value (Map key value))</p><div class="wit-content" /></section></div></section><section><p>lens can decrease the size of interfaces</p><div class="wit-content"><section><p>(Map k v) is a container associating values with type v to keys with type k; central to a map are the tasks to get, set and transform the values associated with a certain key; for this we can create one lens for each key in a map; here comes a nice trick : with a slight change in how we view maps we can use lenses even to insert and delete values; normally we think about a map so that it stores only those keys for which they store values; but we may also pretend that the map stores all keys and the values are wrapped into Maybe indicating if a real value is stored for the corresponding key</p><div class="wit-content"><section><p>lens_value_at :: k -&gt; Lens (Maybe v) (Map k v)</p><div class="wit-content" /></section></div></section><section><p>then insertion is done by setting to Just _, deletion is done by setting to Nothing [where &#39;Just&#39; and &#39;Nothing&#39; are the 2 constructors of the Maybe type]</p><div class="wit-content" /></section></div></section><section><p><a href="ypnccchncfaeqhzh.html">a convincing real-world example</a></p><div class="wit-content" /></section></span></body></html>